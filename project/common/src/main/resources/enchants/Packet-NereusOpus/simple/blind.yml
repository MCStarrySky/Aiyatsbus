

#         Powered by TabooLib 6.1         #


basic:
  id: blind
  name: "致盲"
  max_level: 3

rarity: 罕见
targets:
  - 弓
  - 弩

limitations: [ ]

display:
  description:
    general: "射出的箭矢有概率致盲目标"
    specific: "&7射出的箭矢有&a{概率}&7的概率使目标陷入&a{效果等级}&7的失明状态，持续{持续时间}"

variables:
  leveled:
    概率: "%:3*{level}"
    持续时间: "秒:2*{level}"
    效果等级: "级:{level}"

mechanisms:
  listeners:
    on-damage:
      listen: "entity-damage-by-entity"
      handle: |-
        if instance-of &event[entity] is org.bukkit.entity.LivingEntity then {
          set duration to math mul [ type int &持续时间 20 ]
          set amplifier to math sub [ type int &效果等级 1 ]
          if not check random2 0 to 100 <= type double &概率 then {
            exit
          }
          add-potion-effect BLINDNESS on &event[entity] duration &duration amplifier &amplifier
        }
